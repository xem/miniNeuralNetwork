M=(O,a=1,l)=>Array(O).fill().map((()=>Array(a).fill(l?0:Math.random()-1))),O=(O,a,f,r,m)=>(6===f&&(r=M(O[l],a[0][l],1)),O.map(((O,l)=>{O.map(((M,p)=>{m=a[l]?.[p],f>5?a[0].map(((O,f)=>r[l][f]+=M*a[p][f])):O[p]=f>3?a(M):f>2?M*a:f>1?M*m:f?M-m:M+m}))})),6===f?r:O),l=.3,f=O=>1/(1+Math.E**-O),g=O=>O*(1-O),i=(O,a,l)=>{w=M(a,O),W=M(l,a),b=M(a),B=M(l)},p=(a,M,r,m)=>{if(m=O(O(O(W,O(O(r=O(w,a,6),b),f,4),6),B),f,4),!M)return m;O(M,m,1),O(W,O(m=O(O(O(m,g,4),M,2),l,3),[r.flat()],6)),O(B,m),O(w,O(r=O(O(O(r,g,4),O(W[0].map((O=>[O])),M,6),2),l,3),[a.flat()],6)),O(b,r)}