M=(O,a=1,l)=>Array(O).fill().map((()=>Array(a).fill(l?0:Math.random()-1))),O=(O,a,l,f=l>5&&M(O.length,a[0].length,1),r)=>(O.map(((O,M)=>{O.map(((t,m)=>{r=a[M]?.[m],l>5?a[0].map(((O,l)=>f[M][l]+=t*a[m][l])):O[m]=l>3?a(t):l>2?t*a:l>1?t*r:l?t-r:t+r}))})),6===l?f:O),l=.3,f=O=>1/(1+Math.E**-O),g=O=>O*(1-O),i=(O,a,l)=>{w=M(a,O),W=M(l,a),b=M(a),B=M(l)},p=(a,l,M,r)=>{if(r=O(O(O(W,O(O(M=O(w,a,6),b),f,4),6),B),f,4),!l)return r;O(l,r,1),O(W,O(r=O(O(O(r,g,4),l,2),.3,3),[M.flat()],6)),O(B,r),O(w,O(M=O(O(O(M,g,4),O(W[0].map((O=>[O])),l,6),2),.3,3),[a.flat()],6)),O(b,M)}